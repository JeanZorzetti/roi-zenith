{
  "permissions": {
    "allow": [
      "Bash(npm run build:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\n🎨 UX: Modal de Promoção com Scroll Vertical\n\n**Problema Identificado:**\nModal de promoção para vendas ficava muito grande verticalmente,\nultrapassando a altura da tela e sem possibilidade de scroll.\n\n**Mudanças Implementadas:**\n\n1. **Container Principal** (linha 68):\n   - Adicionado: `max-h-[90vh]` - limita altura a 90% do viewport\n   - Adicionado: `flex flex-col` - layout flexbox vertical\n\n2. **Header** (linha 72):\n   - Adicionado: `flex-shrink-0` - header fixo no topo\n\n3. **Content** (linha 105):\n   - Adicionado: `overflow-y-auto` - scroll vertical\n   - Adicionado: `flex-1` - expande para ocupar espaço disponível\n\n4. **Footer** (linha 241):\n   - Adicionado: `flex-shrink-0` - footer fixo embaixo\n\n**Estrutura Final:**\n```\n┌─────────────────────┐\n│ Header (fixo)       │ ← flex-shrink-0\n├─────────────────────┤\n│ Content             │\n│   ↕️ SCROLL         │ ← overflow-y-auto flex-1\n│                     │\n├─────────────────────┤\n│ Footer (fixo)       │ ← flex-shrink-0\n└─────────────────────┘\nmax-h-[90vh]\n```\n\n**Resultado:**\n✅ Modal nunca ultrapassa 90% da altura da tela\n✅ Header e footer sempre visíveis\n✅ Content com scroll suave quando necessário\n✅ UX melhorada para telas menores\n\n**Arquivo Modificado:**\n- frontend/src/components/crm/PromotionModal.tsx\n\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git push:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\n📋 DOCS: Fase 1 Game Roadmap - Estado Atual da Implementação\n\n**FASE 1 - WEEK 1: BACKEND + DATABASE - STATUS**\n\n## ✅ COMPLETO (Backend Setup):\n\n### Database Schema:\n- ✅ Prisma schema com tabelas de jogo criadas\n- ✅ game_states, game_inventory, game_party, game_quests\n- ✅ game_achievements, game_insights, game_transactions\n- ✅ game_lead_relationships, game_territory_progress\n- ✅ Migrations aplicadas\n\n### API Routes:\n- ✅ /api/game/* routes criadas (gameRoutes.ts)\n- ✅ GET /api/game/state\n- ✅ POST /api/game/init\n- ✅ GET /api/game/inventory\n- ✅ POST /api/game/battle\n\n### Game Service:\n- ✅ gameService.ts implementado\n- ✅ initializeGame(), getGameState()\n- ✅ addResources(), levelUp()\n- ✅ processCRMEvent() - processa eventos do CRM\n\n### CRM Integration:\n- ✅ Campos customizados no Deal model\n- ✅ gameEvents.ts com event handlers completos:\n  - onContactCreated\n  - onTargetDiscovered\n  - onPainMapped, onPainDiscovered\n  - onDecisionMakerIdentified\n  - onLeadQualified\n  - onInterviewCompleted\n  - onResearchToSalesPromotion\n  - onActivityCreated\n  - onSolutionMapped\n  - onReferralReceived\n  - onRelationshipUpgraded\n\n### Config:\n- ✅ gameConfig.ts com constantes:\n  - XP_TABLE (level progression)\n  - REWARDS_TABLE (ações → recursos)\n  - ITEM_DATABASE (60+ items)\n  - QUEST_DATABASE (main/daily/weekly quests)\n  - TERRITORY_DATABASE (6 territórios)\n\n## 🔄 EM PROGRESSO:\n\n### Socket.IO Setup:\n- ⏳ Socket.IO configurado no server.ts\n- ⏳ gameSocket.ts com GameEvents criado\n- ⚠️ PENDENTE: Testar real-time events em produção\n\n### Webhook/Event System:\n- ⏳ Event handlers implementados\n- ⚠️ PENDENTE: Confirmar triggers em TODOS endpoints CRM\n- ⚠️ PENDENTE: Testar sincronização completa\n\n## 📝 PRÓXIMOS PASSOS:\n\n### FASE 1 - WEEK 2: FRONTEND FOUNDATION\n1. [ ] Instalar Phaser.js no frontend\n2. [ ] Criar estrutura /frontend/src/game/\n3. [ ] Implementar BootScene, MenuScene, WorldMapScene\n4. [ ] Criar BattleScene com sistema de turnos\n5. [ ] Implementar ProgressionSystem (XP, level up)\n6. [ ] Criar UIScene (HUD overlay)\n7. [ ] Integrar com GamePage.tsx\n\n### Deliverable Week 2:\n- MVP jogável: CRM → Jogo → Rewards → Level up\n- Batalha funcional com 3-4 ações\n- Visual pixel art básico (placeholder ok)\n- Performance 60 FPS estável\n\n**Roadmap completo:** roadmap_game.md (linhas 857-976)\n\n🎮 Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")"
    ],
    "deny": [],
    "ask": []
  }
}
